// 中国省份行政代码映射
export const CHINA_PROVINCES = {
  '110000': { name: '北京市', nameEn: 'Beijing', coordinates: [116.4074, 39.9042] },
  '120000': { name: '天津市', nameEn: 'Tianjin', coordinates: [117.2008, 39.0842] },
  '130000': { name: '河北省', nameEn: 'Hebei', coordinates: [114.5149, 38.0428] },
  '140000': { name: '山西省', nameEn: 'Shanxi', coordinates: [112.5489, 37.8570] },
  '150000': { name: '内蒙古自治区', nameEn: 'Inner Mongolia', coordinates: [111.6708, 40.8183] },
  '210000': { name: '辽宁省', nameEn: 'Liaoning', coordinates: [123.4315, 41.8057] },
  '220000': { name: '吉林省', nameEn: 'Jilin', coordinates: [125.3245, 43.8868] },
  '230000': { name: '黑龙江省', nameEn: 'Heilongjiang', coordinates: [126.6420, 45.7560] },
  '310000': { name: '上海市', nameEn: 'Shanghai', coordinates: [121.4737, 31.2304] },
  '320000': { name: '江苏省', nameEn: 'Jiangsu', coordinates: [118.7633, 32.0615] },
  '330000': { name: '浙江省', nameEn: 'Zhejiang', coordinates: [120.1536, 30.2650] },
  '340000': { name: '安徽省', nameEn: 'Anhui', coordinates: [117.2757, 31.8612] },
  '350000': { name: '福建省', nameEn: 'Fujian', coordinates: [119.2965, 26.0745] },
  '360000': { name: '江西省', nameEn: 'Jiangxi', coordinates: [115.9092, 28.6765] },
  '370000': { name: '山东省', nameEn: 'Shandong', coordinates: [117.0009, 36.6758] },
  '410000': { name: '河南省', nameEn: 'Henan', coordinates: [113.6500, 34.7574] },
  '420000': { name: '湖北省', nameEn: 'Hubei', coordinates: [114.2980, 30.5844] },
  '430000': { name: '湖南省', nameEn: 'Hunan', coordinates: [112.9836, 28.1124] },
  '440000': { name: '广东省', nameEn: 'Guangdong', coordinates: [113.2644, 23.1291] },
  '450000': { name: '广西壮族自治区', nameEn: 'Guangxi', coordinates: [108.3201, 22.8200] },
  '460000': { name: '海南省', nameEn: 'Hainan', coordinates: [110.3312, 20.0311] },
  '500000': { name: '重庆市', nameEn: 'Chongqing', coordinates: [106.5048, 29.5343] },
  '510000': { name: '四川省', nameEn: 'Sichuan', coordinates: [104.0665, 30.5723] },
  '520000': { name: '贵州省', nameEn: 'Guizhou', coordinates: [106.7070, 26.5982] },
  '530000': { name: '云南省', nameEn: 'Yunnan', coordinates: [102.7123, 25.0406] },
  '540000': { name: '西藏自治区', nameEn: 'Tibet', coordinates: [91.1174, 29.6456] },
  '610000': { name: '陕西省', nameEn: 'Shaanxi', coordinates: [108.9540, 34.2658] },
  '620000': { name: '甘肃省', nameEn: 'Gansu', coordinates: [103.8236, 36.0581] },
  '630000': { name: '青海省', nameEn: 'Qinghai', coordinates: [101.7804, 36.6230] },
  '640000': { name: '宁夏回族自治区', nameEn: 'Ningxia', coordinates: [106.2586, 38.4711] },
  '650000': { name: '新疆维吾尔自治区', nameEn: 'Xinjiang', coordinates: [87.6177, 43.7928] },
  '710000': { name: '台湾省', nameEn: 'Taiwan', coordinates: [121.5654, 25.0330] },
  '810000': { name: '香港特别行政区', nameEn: 'Hong Kong', coordinates: [114.1694, 22.3193] },
  '820000': { name: '澳门特别行政区', nameEn: 'Macau', coordinates: [113.5439, 22.1987] }
}

// 主要城市代码映射（北京市区）
export const BEIJING_DISTRICTS = {
  '110101': { name: '东城区', nameEn: 'Dongcheng District', coordinates: [116.4183, 39.9174] },
  '110102': { name: '西城区', nameEn: 'Xicheng District', coordinates: [116.3661, 39.9143] },
  '110105': { name: '朝阳区', nameEn: 'Chaoyang District', coordinates: [116.4430, 39.9211] },
  '110106': { name: '丰台区', nameEn: 'Fengtai District', coordinates: [116.2865, 39.8584] },
  '110107': { name: '石景山区', nameEn: 'Shijingshan District', coordinates: [116.1950, 39.9142] },
  '110108': { name: '海淀区', nameEn: 'Haidian District', coordinates: [116.2989, 39.9589] },
  '110109': { name: '门头沟区', nameEn: 'Mentougou District', coordinates: [116.1058, 39.9370] },
  '110111': { name: '房山区', nameEn: 'Fangshan District', coordinates: [115.9882, 39.7490] },
  '110112': { name: '通州区', nameEn: 'Tongzhou District', coordinates: [116.6565, 39.9026] },
  '110113': { name: '顺义区', nameEn: 'Shunyi District', coordinates: [116.6534, 40.1280] },
  '110114': { name: '昌平区', nameEn: 'Changping District', coordinates: [116.2350, 40.2178] },
  '110115': { name: '大兴区', nameEn: 'Daxing District', coordinates: [116.3383, 39.7288] },
  '110116': { name: '怀柔区', nameEn: 'Huairou District', coordinates: [116.6371, 40.3163] },
  '110117': { name: '平谷区', nameEn: 'Pinggu District', coordinates: [117.1120, 40.1445] },
  '110118': { name: '密云区', nameEn: 'Miyun District', coordinates: [116.8438, 40.3769] },
  '110119': { name: '延庆区', nameEn: 'Yanqing District', coordinates: [115.9851, 40.4651] }
}

// 上海市区代码映射
export const SHANGHAI_DISTRICTS = {
  '310101': { name: '黄浦区', nameEn: 'Huangpu District', coordinates: [121.4900, 31.2320] },
  '310104': { name: '徐汇区', nameEn: 'Xuhui District', coordinates: [121.4367, 31.1880] },
  '310105': { name: '长宁区', nameEn: 'Changning District', coordinates: [121.4220, 31.2204] },
  '310106': { name: '静安区', nameEn: 'Jingan District', coordinates: [121.4484, 31.2290] },
  '310107': { name: '普陀区', nameEn: 'Putuo District', coordinates: [121.3967, 31.2497] },
  '310109': { name: '虹口区', nameEn: 'Hongkou District', coordinates: [121.5057, 31.2646] },
  '310110': { name: '杨浦区', nameEn: 'Yangpu District', coordinates: [121.5265, 31.2594] },
  '310112': { name: '闵行区', nameEn: 'Minhang District', coordinates: [121.3816, 31.1122] },
  '310113': { name: '宝山区', nameEn: 'Baoshan District', coordinates: [121.4890, 31.4044] },
  '310114': { name: '嘉定区', nameEn: 'Jiading District', coordinates: [121.2655, 31.3746] },
  '310115': { name: '浦东新区', nameEn: 'Pudong New Area', coordinates: [121.5447, 31.2216] },
  '310116': { name: '金山区', nameEn: 'Jinshan District', coordinates: [121.3417, 30.7245] },
  '310117': { name: '松江区', nameEn: 'Songjiang District', coordinates: [121.2281, 31.0324] },
  '310118': { name: '青浦区', nameEn: 'Qingpu District', coordinates: [121.1134, 31.1507] },
  '310120': { name: '奉贤区', nameEn: 'Fengxian District', coordinates: [121.4749, 30.9178] },
  '310151': { name: '崇明区', nameEn: 'Chongming District', coordinates: [121.3972, 31.6266] }
}

// 地理区域边界判断函数
export const getProvinceByCoordinates = (lng: number, lat: number): string | null => {
  // 简化的省份边界判断（基于经纬度范围）
  
  // 北京市
  if (lng >= 115.7 && lng <= 117.4 && lat >= 39.4 && lat <= 41.6) return '110000'
  
  // 上海市
  if (lng >= 120.9 && lng <= 121.9 && lat >= 30.7 && lat <= 31.9) return '310000'
  
  // 广东省
  if (lng >= 109.7 && lng <= 117.2 && lat >= 20.2 && lat <= 25.3) return '440000'
  
  // 浙江省
  if (lng >= 118.0 && lng <= 123.0 && lat >= 27.0 && lat <= 31.2) return '330000'
  
  // 江苏省
  if (lng >= 116.4 && lng <= 121.9 && lat >= 30.8 && lat <= 35.1) return '320000'
  
  // 四川省
  if (lng >= 97.3 && lng <= 108.5 && lat >= 26.0 && lat <= 34.3) return '510000'
  
  // 山东省
  if (lng >= 114.8 && lng <= 122.7 && lat >= 34.4 && lat <= 38.4) return '370000'
  
  // 河南省
  if (lng >= 110.4 && lng <= 116.7 && lat >= 31.4 && lat <= 36.4) return '410000'
  
  // 湖北省
  if (lng >= 108.3 && lng <= 116.1 && lat >= 29.0 && lat <= 33.3) return '420000'
  
  // 湖南省
  if (lng >= 108.8 && lng <= 114.2 && lat >= 24.6 && lat <= 30.1) return '430000'
  
  return null
}

export const getCityByCoordinates = (lng: number, lat: number): string | null => {
  // 简化的城市边界判断
  
  // 北京市区
  if (lng >= 116.0 && lng <= 117.0 && lat >= 39.4 && lat <= 40.5) {
    // 海淀区
    if (lng >= 116.1 && lng <= 116.4 && lat >= 39.8 && lat <= 40.1) return '110108'
    // 朝阳区
    if (lng >= 116.3 && lng <= 116.8 && lat >= 39.8 && lat <= 40.1) return '110105'
    // 西城区
    if (lng >= 116.3 && lng <= 116.4 && lat >= 39.9 && lat <= 40.0) return '110102'
    // 东城区
    if (lng >= 116.4 && lng <= 116.5 && lat >= 39.9 && lat <= 40.0) return '110101'
    // 丰台区
    if (lng >= 116.1 && lng <= 116.4 && lat >= 39.7 && lat <= 39.9) return '110106'
    // 石景山区
    if (lng >= 116.1 && lng <= 116.3 && lat >= 39.8 && lat <= 40.0) return '110107'
  }
  
  // 上海市区
  if (lng >= 121.0 && lng <= 122.0 && lat >= 30.7 && lat <= 31.9) {
    // 浦东新区
    if (lng >= 121.5 && lng <= 121.9 && lat >= 31.0 && lat <= 31.4) return '310115'
    // 黄浦区
    if (lng >= 121.45 && lng <= 121.53 && lat >= 31.21 && lat <= 31.25) return '310101'
    // 徐汇区
    if (lng >= 121.40 && lng <= 121.48 && lat >= 31.15 && lat <= 31.22) return '310104'
    // 长宁区
    if (lng >= 121.38 && lng <= 121.45 && lat >= 31.18 && lat <= 31.26) return '310105'
    // 静安区
    if (lng >= 121.42 && lng <= 121.48 && lat >= 31.22 && lat <= 31.28) return '310106'
    // 普陀区
    if (lng >= 121.35 && lng <= 121.44 && lat >= 31.23 && lat <= 31.28) return '310107'
  }
  
  return null
}

// 地图数据源配置
export const MAP_DATA_SOURCES = {
  world: 'https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson',
  worldBackup: 'https://datahub.io/core/geo-countries/r/countries.geojson',
  chinaProvinces: 'https://geo.datav.aliyun.com/areas_v3/bound/100000.json',
  chinaProvince: (code: string) => `https://geo.datav.aliyun.com/areas_v3/bound/${code}.json`,
  chinaCity: (code: string) => `https://geo.datav.aliyun.com/areas_v3/bound/${code}.json`
}

// 获取地区数据的辅助函数
export const getRegionInfo = (code: string) => {
  if (CHINA_PROVINCES[code as keyof typeof CHINA_PROVINCES]) {
    return CHINA_PROVINCES[code as keyof typeof CHINA_PROVINCES]
  }
  if (BEIJING_DISTRICTS[code as keyof typeof BEIJING_DISTRICTS]) {
    return BEIJING_DISTRICTS[code as keyof typeof BEIJING_DISTRICTS]
  }
  if (SHANGHAI_DISTRICTS[code as keyof typeof SHANGHAI_DISTRICTS]) {
    return SHANGHAI_DISTRICTS[code as keyof typeof SHANGHAI_DISTRICTS]
  }
  return null
} 